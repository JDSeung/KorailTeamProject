<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.korail.client.reservation.dao.TicketingDAO">
	<select id="getTicketingInfo" resultType="ticketingVO" parameterType="ticketingVO">
		내 예매 정보, 전체 예매 정보 
		SELECT * 
		FROM TICKETING_TB
		<where>
			<if test = "userNo != null">
				USERNO = #{userNo}
			</if>
		</where>
	</select>
	<select id="getTicketInfo" resultType="ticketingVO">
<<<<<<< HEAD
		2 = 현재 발권중인 사람 예매페이지에서 예약대기에 들어갈 항목.
=======
		<!-- 2 = 현재 발권중인 사람 예매페이지에서 예약대기에 들어갈 항목., 전체 인원 -->
>>>>>>> b4b8be81163f02523b6c11eef63a983a4546f169
		SELECT COUNT(*)
		FROM TICKETING_TB
		WHERE TICKETINGETC = '2' AND  TICKETINGETC = '3'
	</select>
	<insert id="setTicketing" parameterType="ticketingVO">
		예매
		INSERT INTO
		TICKETING_TB   (TICKETINGNO, USERNO, TRAINNAME, 
						RIDEDATE, DEPPLACENAME, DEPPLANDTIME, 
						ARRPLACENAME, ARRPLANDTIME, RESERVATIONNO, 
						RATE, SEATDIVISION, SEAT, PASSENGERTYPE, 
						TICKETINGDATE, TICKETINGETC)
				VALUES(     TICKETING_TB_SEQ.NEXTVAL, #{userNo}, #{trainName},
						    #{rideDate}, #{depPlaceName}, #{depPlandTime},
							#{arrPlaceName}, #{arrPlandTime}, #{reservationNo},
							#{rate}, #{seatDivision}, #{seat}, #{passengerType},
							#{ticketingDate}, #{ticketingETC}
					 	)
	</insert>
</mapper>
